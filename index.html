<!doctype html>
<html lang="en" dir="ltr">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, maximum-scale=1.0, user-scalable=no">
  <meta name="theme-color" content="#1a1a2e">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <title>Kurdish Imposter</title>
  <link rel="icon" type="image/png" href="icon.png">
  <link rel="apple-touch-icon" href="icon.png">
  <link rel="manifest" href="manifest.json">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800&amp;family=Noto+Sans+Arabic:wght@400;600;700&amp;display=swap" rel="stylesheet">
  <script src="/_sdk/element_sdk.js"></script>
  <style>
    body {
      box-sizing: border-box;
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
      -webkit-tap-highlight-color: transparent;
      touch-action: pan-y pan-x;
      -webkit-overflow-scrolling: touch;
    }
    
    input, textarea {
      -webkit-user-select: text;
      -moz-user-select: text;
      -ms-user-select: text;
      user-select: text;
    }

    :root {
      --primary: #d4af37;
      --primary-hover: #b8941f;
      --secondary: #8e44ad;
      --accent: #e74c3c;
      --danger: #e74c3c;
      --success: #27ae60;
      --warning: #f39c12;
      --bg-primary: #1a1442;
      --bg-secondary: #2d1b69;
      --bg-card: #3d2a6b;
      --text-primary: #fef5e7;
      --text-secondary: #d4c5e9;
      --text-muted: #a48ec7;
      --border-radius: 16px;
      --shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
      --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      --safe-top: env(safe-area-inset-top, 0px);
      --safe-bottom: env(safe-area-inset-bottom, 0px);
      --safe-left: env(safe-area-inset-left, 0px);
      --safe-right: env(safe-area-inset-right, 0px);
    }

    html, body {
      height: 100%;
      width: 100%;
      margin: 0;
      padding: 0;
      background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
      color: var(--text-primary);
      overflow-x: hidden;
      padding-top: var(--safe-top);
      padding-bottom: var(--safe-bottom);
      padding-left: var(--safe-left);
      padding-right: var(--safe-right);
    }

    .app-wrapper {
      min-height: 100vh; /* Ensure it covers the full viewport height */
      width: 100%;
      display: flex;
      flex-direction: column;
      background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
    }

    @supports (height: 100dvh) {
      html, body {
        height: 100dvh; /* Use dynamic viewport height to avoid white gaps */
      }
      .app-wrapper {
        min-height: 100dvh;
      }
    }

    body[dir="rtl"] {
      font-family: 'Noto Sans Arabic', 'Poppins', sans-serif;
    }

    .app-wrapper {
      min-height: 100%;
      width: 100%;
      display: flex;
      flex-direction: column;
      background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
    }

    /* News Ticker */
    .news-ticker {
      position: sticky;
      top: 0;
      z-index: 1000;
      background: linear-gradient(135deg, var(--primary), var(--bg-card));
      padding: 10px 16px;
      display: flex;
      align-items: center;
      gap: 12px;
      border-bottom: 2px solid var(--secondary);
      overflow: hidden;
    }
    
    .news-ticker.hidden {
      display: none;
    }

    .ticker-label {
      background: var(--secondary);
      color: var(--bg-primary);
      padding: 6px 14px;
      border-radius: 20px;
      font-weight: 700;
      font-size: 0.85rem;
      white-space: nowrap;
      flex-shrink: 0;
    }

    .ticker-track {
      flex: 1;
      overflow: hidden;
      position: relative;
    }

    .ticker-content {
      display: inline-block;
      white-space: nowrap;
      animation: ticker-scroll 20s linear infinite;
      padding-left: 100%;
    }

    .ticker-track:hover .ticker-content {
      animation-play-state: paused;
    }

    @keyframes ticker-scroll {
      0% { transform: translateX(0); }
      100% { transform: translateX(-100%); }
    }

    [dir="rtl"] .ticker-content {
      animation: ticker-scroll-rtl 20s linear infinite;
      padding-left: 0;
      padding-right: 100%;
    }

    @keyframes ticker-scroll-rtl {
      0% { transform: translateX(0); }
      100% { transform: translateX(100%); }
    }

    /* Screen Container */
    .screen {
      display: none;
      flex: 1;
      padding: 20px;
      overflow-y: auto;
    }

    .screen.active {
      display: flex;
      flex-direction: column;
      animation: slideIn 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .screen.slide-out {
      animation: slideOut 0.3s cubic-bezier(0.4, 0, 0.6, 1);
    }

    @keyframes slideIn {
      from { 
        opacity: 0; 
        transform: translateX(100px);
      }
      to { 
        opacity: 1; 
        transform: translateX(0);
      }
    }
    
    @keyframes slideOut {
      from { 
        opacity: 1; 
        transform: translateX(0);
      }
      to { 
        opacity: 0; 
        transform: translateX(-100px);
      }
    }

    /* Splash Screen */
    .splash-content {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      gap: 24px;
    }

    .splash-logo {
      font-size: 6rem;
      animation: pulse 2s ease-in-out infinite;
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }

    .splash-title {
      font-size: 2.5rem;
      font-weight: 800;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .splash-spinner {
      width: 50px;
      height: 50px;
      border: 4px solid var(--bg-card);
      border-top-color: var(--secondary);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* Main Menu */
    .menu-content {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 40px 20px;
      gap: 20px;
      max-width: 400px;
      margin: 0 auto;
      width: 100%;
    }

    .menu-logo {
      font-size: 5rem;
      margin-bottom: 10px;
    }

    .menu-title {
      font-size: 2rem;
      font-weight: 800;
      text-align: center;
      margin-bottom: 30px;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    /* Buttons */
    .btn {
      width: 100%;
      padding: 18px 24px;
      border: none;
      border-radius: var(--border-radius);
      font-size: 1.1rem;
      font-weight: 700;
      cursor: pointer;
      transition: var(--transition);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      font-family: inherit;
      position: relative;
      overflow: hidden;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }

    .btn-primary {
      background: linear-gradient(135deg, rgba(108, 92, 231, 0.3), rgba(91, 76, 219, 0.5));
      color: white;
      box-shadow: 0 8px 32px rgba(108, 92, 231, 0.4);
      border: 2px solid rgba(255, 255, 255, 0.3);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
    }

    .btn-primary:hover {
      transform: translateY(-3px) scale(1.02);
      box-shadow: 0 12px 40px rgba(108, 92, 231, 0.6);
      background: linear-gradient(135deg, rgba(108, 92, 231, 0.5), rgba(91, 76, 219, 0.7));
      border-color: rgba(255, 255, 255, 0.5);
    }

    .btn-secondary {
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
      color: var(--text-primary);
      border: 2px solid rgba(255, 255, 255, 0.2);
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
    }

    .btn-secondary:hover {
      transform: translateY(-2px);
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.2), rgba(255, 255, 255, 0.1));
      border-color: rgba(255, 255, 255, 0.4);
      box-shadow: 0 6px 25px rgba(108, 92, 231, 0.4);
    }

    .btn-danger {
      background: linear-gradient(135deg, rgba(231, 76, 60, 0.3), rgba(192, 57, 43, 0.5));
      color: white;
      border: 2px solid rgba(255, 255, 255, 0.3);
      box-shadow: 0 8px 32px rgba(231, 76, 60, 0.4);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
    }
    
    .btn-danger:hover {
      transform: translateY(-2px);
      background: linear-gradient(135deg, rgba(231, 76, 60, 0.5), rgba(192, 57, 43, 0.7));
      box-shadow: 0 10px 35px rgba(231, 76, 60, 0.6);
      border-color: rgba(255, 255, 255, 0.5);
    }

    .btn-success {
      background: linear-gradient(135deg, rgba(0, 184, 148, 0.3), rgba(0, 128, 96, 0.5));
      color: white;
      border: 2px solid rgba(255, 255, 255, 0.3);
      box-shadow: 0 8px 32px rgba(0, 184, 148, 0.4);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
    }
    
    .btn-success:hover {
      transform: translateY(-2px);
      background: linear-gradient(135deg, rgba(0, 184, 148, 0.5), rgba(0, 128, 96, 0.7));
      box-shadow: 0 10px 35px rgba(0, 184, 148, 0.6);
      border-color: rgba(255, 255, 255, 0.5);
    }

    .btn-small {
      padding: 10px 16px;
      font-size: 0.9rem;
    }

    .btn-icon {
      width: 50px;
      height: 50px;
      padding: 0;
      border-radius: 50%;
      font-size: 1.5rem;
    }

    /* Cards */
    .card {
      background: var(--bg-card);
      border-radius: var(--border-radius);
      padding: 24px;
      box-shadow: var(--shadow);
      width: 100%;
    }

    .card-title {
      font-size: 1.3rem;
      font-weight: 700;
      margin-bottom: 16px;
      color: var(--secondary);
    }

    /* Form Elements */
    .form-group {
      margin-bottom: 20px;
    }

    .form-label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: var(--text-secondary);
    }

    .form-input {
      width: 100%;
      padding: 14px 18px;
      border: 2px solid var(--bg-card);
      border-radius: 12px;
      background: var(--bg-secondary);
      color: var(--text-primary);
      font-size: 1rem;
      font-family: inherit;
      transition: var(--transition);
    }

    .form-input:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 4px rgba(108, 92, 231, 0.2);
    }

    /* Number Input */
    .number-control {
      display: flex;
      align-items: center;
      gap: 16px;
    }

    .number-control .btn-icon {
      flex-shrink: 0;
    }

    .number-display {
      font-size: 2rem;
      font-weight: 800;
      min-width: 60px;
      text-align: center;
      color: var(--secondary);
    }

    /* Player List */
    .player-list {
      display: flex;
      flex-direction: column;
      gap: 12px;
      max-height: 300px;
      overflow-y: auto;
      padding: 4px;
    }

    .player-item {
      display: flex;
      align-items: center;
      gap: 12px;
      background: var(--bg-secondary);
      padding: 12px 16px;
      border-radius: 12px;
      animation: slideIn 0.3s ease;
    }

    @keyframes slideIn {
      from { opacity: 0; transform: translateX(-20px); }
      to { opacity: 1; transform: translateX(0); }
    }

    .player-number {
      width: 32px;
      height: 32px;
      background: var(--primary);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 0.9rem;
      flex-shrink: 0;
    }

    .player-input {
      flex: 1;
      background: transparent;
      border: none;
      color: var(--text-primary);
      font-size: 1rem;
      font-family: inherit;
      padding: 8px;
    }

    .player-input:focus {
      outline: none;
    }

    .player-remove {
      background: var(--danger);
      color: white;
      border: none;
      width: 28px;
      height: 28px;
      border-radius: 50%;
      cursor: pointer;
      font-size: 1.2rem;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: var(--transition);
    }

    .player-remove:hover {
      transform: scale(1.1);
    }

    /* Role Card */
    .role-card-container {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }

    .current-player-name {
      font-size: 1.8rem;
      font-weight: 700;
      margin-bottom: 30px;
      text-align: center;
      color: var(--secondary);
    }

    .role-card {
      width: 280px;
      height: 400px;
      perspective: 1000px;
      cursor: pointer;
    }
    
    @media (max-width: 480px) {
      .role-card {
        width: 300px;
        height: 450px;
      }
    }

    .role-card-inner {
      width: 100%;
      height: 100%;
      position: relative;
      transform-style: preserve-3d;
      transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .role-card.flipped .role-card-inner {
      transform: rotateY(180deg);
    }

    .role-card-front,
    .role-card-back {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      border-radius: 24px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 30px;
      text-align: center;
    }

    .role-card-front {
      background: linear-gradient(135deg, var(--bg-card), var(--bg-secondary));
      border: 3px solid var(--primary);
      box-shadow: 0 20px 60px rgba(108, 92, 231, 0.3);
    }

    .role-card-front-icon {
      font-size: 4rem;
      margin-bottom: 20px;
    }

    .role-card-front-text {
      font-size: 1.2rem;
      color: var(--text-secondary);
    }

    .role-card-back {
      transform: rotateY(180deg);
      background: linear-gradient(135deg, var(--bg-card), var(--bg-secondary));
      border: 3px solid var(--primary);
      box-shadow: 0 20px 60px rgba(108, 92, 231, 0.3);
    }

    .role-card-back.civilian .role-title {
      color: var(--success);
    }

    .role-card-back.imposter .role-title {
      color: var(--danger);
    }

    .role-icon {
      font-size: 5rem;
      margin-bottom: 20px;
    }

    .role-title {
      font-size: 1.8rem;
      font-weight: 800;
      margin-bottom: 16px;
    }

    .role-word {
      font-size: 1.3rem;
      padding: 12px 20px;
      background: rgba(255, 255, 255, 0.2);
      border-radius: 12px;
      margin-bottom: 12px;
      word-wrap: break-word;
      max-width: 90%;
    }

    .role-hint {
      font-size: 0.95rem;
      opacity: 0.9;
      word-wrap: break-word;
      max-width: 90%;
    }
    
    @media (max-width: 480px) {
      .role-icon {
        font-size: 4.5rem;
      }
      
      .role-title {
        font-size: 1.6rem;
      }
      
      .role-word {
        font-size: 1.2rem;
        padding: 10px 16px;
      }
      
      .role-hint {
        font-size: 0.9rem;
      }
    }

    .pass-phone-btn {
      margin-top: 30px;
    }

    /* Card Picker */
    .card-picker-container {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: space-between;
      padding: 20px;
      gap: 20px;
      overflow-y: auto;
      min-height: 0;
    }
    
    .card-picker-container h2 {
      z-index: 100;
      position: relative;
      flex-shrink: 0;
    }
    
    .card-picker-buttons {
      display: flex;
      flex-direction: column;
      gap: 12px;
      width: 100%;
      max-width: 400px;
      flex-shrink: 0;
    }

    .card-picker-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 16px;
      width: 100%;
      max-width: 600px;
      padding: 20px;
      flex-shrink: 1;
      overflow-y: auto;
    }
    
    @media (max-width: 480px) {
      .card-picker-grid {
        grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
        gap: 12px;
        padding: 10px;
      }
    }

    .player-card {
      background: linear-gradient(135deg, var(--bg-card), var(--bg-secondary));
      border: 2px solid rgba(255, 255, 255, 0.2);
      border-radius: 16px;
      padding: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      font-weight: 700;
      font-size: 1rem;
      color: var(--text-primary);
      transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
      min-height: 80px;
      word-wrap: break-word;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
      position: relative;
      transform-style: preserve-3d;
      backface-visibility: hidden;
    }
    
    @media (max-width: 480px) {
      .player-card {
        padding: 16px;
        font-size: 0.9rem;
        min-height: 70px;
      }
    }

    .player-card.flashing {
      animation: cardFlash 0.5s ease-in-out infinite;
    }

    .player-card.selected {
      position: fixed !important;
      top: 50% !important;
      left: 50% !important;
      transform: translate(-50%, -50%) scale(1.5) rotateY(360deg) !important;
      background: linear-gradient(135deg, #f39c12, #e67e22);
      border-color: #f1c40f;
      box-shadow: 0 0 50px rgba(243, 156, 18, 1), 0 0 100px rgba(243, 156, 18, 0.6);
      z-index: 10000 !important;
      animation: selectedGlow 1.5s ease-in-out infinite;
    }

    @keyframes cardFlash {
      0%, 100% {
        background: linear-gradient(135deg, var(--bg-card), var(--bg-secondary));
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        transform: scale(1);
      }
      50% {
        background: linear-gradient(135deg, var(--primary), var(--secondary));
        box-shadow: 0 0 30px rgba(108, 92, 231, 0.8);
        transform: scale(1.05);
      }
    }

    @keyframes selectedGlow {
      0%, 100% {
        box-shadow: 0 0 50px rgba(243, 156, 18, 1), 0 0 100px rgba(243, 156, 18, 0.6);
      }
      50% {
        box-shadow: 0 0 70px rgba(243, 156, 18, 1), 0 0 120px rgba(243, 156, 18, 0.8);
      }
    }

    .card-picker-result {
      text-align: center;
      z-index: 100;
      flex-shrink: 0;
    }

    .card-picker-result-text {
      font-size: 1.2rem;
      color: var(--text-secondary);
      margin-bottom: 8px;
    }

    .card-picker-result-name {
      font-size: 2rem;
      font-weight: 800;
      color: var(--warning);
      text-shadow: 0 0 20px rgba(253, 203, 110, 0.5);
    }

    /* Settings */
    .settings-content {
      flex: 1;
      padding: 20px;
      max-width: 500px;
      margin: 0 auto;
      width: 100%;
    }

    .settings-section {
      margin-bottom: 30px;
    }

    .settings-title {
      font-size: 1.1rem;
      font-weight: 700;
      color: var(--text-secondary);
      margin-bottom: 16px;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .theme-selector {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      row-gap: 40px;
    }

    .theme-btn {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      border: 3px solid transparent;
      cursor: pointer;
      transition: var(--transition);
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
    }

    .theme-btn.active {
      border-color: var(--secondary);
      transform: scale(1.1);
    }

    .theme-btn::after {
      content: attr(data-name);
      position: absolute;
      bottom: -28px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 0.75rem;
      white-space: nowrap;
      color: var(--text-secondary);
    }

    .theme-ramadan { background: linear-gradient(135deg, #1a1442, #2d1b69); }
    .theme-dark { background: linear-gradient(135deg, #1a1a2e, #16213e); }
    .theme-light { background: linear-gradient(135deg, #f5f5f5, #e0e0e0); }
    .theme-modern { background: linear-gradient(135deg, #667eea, #764ba2); }
    .theme-snow { background: linear-gradient(135deg, #a8edea, #fed6e3); }

    .mute-btn {
      width: 100%;
      padding: 20px;
      font-size: 1.2rem;
    }

    .mute-btn.muted {
      background: var(--bg-secondary);
      opacity: 0.7;
    }

    /* Language Toggle */
    .lang-toggle {
      display: flex;
      background: var(--bg-secondary);
      border-radius: 12px;
      padding: 4px;
    }

    .lang-btn {
      flex: 1;
      padding: 12px;
      border: none;
      background: transparent;
      color: var(--text-secondary);
      font-weight: 600;
      cursor: pointer;
      border-radius: 10px;
      transition: var(--transition);
      font-family: inherit;
    }

    .lang-btn.active {
      background: var(--primary);
      color: white;
    }

    /* Scoreboard */
    .scoreboard {
      margin-top: 30px;
    }

    .score-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 16px;
      background: var(--bg-secondary);
      border-radius: 12px;
      margin-bottom: 12px;
    }

    .score-player {
      font-weight: 600;
    }

    .score-controls {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .score-value {
      font-size: 1.5rem;
      font-weight: 800;
      min-width: 50px;
      text-align: center;
      color: var(--warning);
    }

    .score-btn {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      border: none;
      font-size: 1.2rem;
      font-weight: 700;
      cursor: pointer;
      transition: var(--transition);
    }

    .score-btn-plus {
      background: var(--success);
      color: white;
    }

    .score-btn-minus {
      background: var(--danger);
      color: white;
    }

    /* Updates Page */
    .updates-list {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .update-item {
      background: var(--bg-card);
      padding: 20px;
      border-radius: var(--border-radius);
      border-left: 4px solid var(--primary);
    }

    .update-version {
      font-weight: 700;
      color: var(--secondary);
      margin-bottom: 8px;
    }

    .update-content {
      color: var(--text-secondary);
      line-height: 1.6;
    }

    /* History Page */
    .history-item {
      background: var(--bg-card);
      padding: 20px;
      border-radius: var(--border-radius);
      margin-bottom: 16px;
    }

    .history-date {
      font-size: 0.9rem;
      color: var(--text-muted);
      margin-bottom: 8px;
    }

    .history-players {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .history-player {
      background: var(--bg-secondary);
      padding: 6px 12px;
      border-radius: 20px;
      font-size: 0.85rem;
    }

    .history-player.winner {
      background: var(--warning);
      color: var(--bg-primary);
    }

    /* Modal / Dialog */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.8);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 2000;
      padding: 20px;
    }

    .modal-overlay.active {
      display: flex;
    }

    .modal {
      background: var(--bg-card);
      border-radius: var(--border-radius);
      padding: 30px;
      max-width: 400px;
      width: 100%;
      animation: modalIn 0.3s ease;
    }

    @keyframes modalIn {
      from { opacity: 0; transform: scale(0.9); }
      to { opacity: 1; transform: scale(1); }
    }

    .modal-title {
      font-size: 1.5rem;
      font-weight: 700;
      margin-bottom: 16px;
      text-align: center;
    }

    .modal-text {
      color: var(--text-secondary);
      margin-bottom: 24px;
      text-align: center;
    }

    .modal-actions {
      display: flex;
      gap: 12px;
    }

    /* Word Editor */
    .word-editor {
      background: var(--bg-secondary);
      border-radius: var(--border-radius);
      padding: 20px;
      margin-top: 20px;
    }

    .word-list {
      max-height: 200px;
      overflow-y: auto;
      margin-top: 16px;
    }

    .word-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px;
      background: var(--bg-card);
      border-radius: 8px;
      margin-bottom: 8px;
    }

    /* Snow Animation */
    .snowflake {
      position: fixed;
      color: #4a90e2;
      font-size: 1.5rem;
      pointer-events: none;
      z-index: 9999;
      animation: snowfall linear infinite;
      opacity: 0.7;
      top: -50px;
    }

    @keyframes snowfall {
      0% {
        transform: translateY(0) translateX(0) rotate(0deg);
      }
      100% {
        transform: translateY(100vh) translateX(100px) rotate(360deg);
      }
    }

    /* Ramadan Theme (Default) */
    .theme-ramadan-mode {
      --primary: #d4af37;
      --primary-hover: #b8941f;
      --secondary: #8e44ad;
      --bg-primary: #0a0520;
      --bg-secondary: #1a0f3d;
      --bg-card: #2d1b69;
      --text-primary: #fef5e7;
      --text-secondary: #d4c5e9;
      --text-muted: #a48ec7;
      background: radial-gradient(ellipse at top, #1a0f3d 0%, #0a0520 50%, #000000 100%);
    }
    
    .theme-ramadan-mode .app-wrapper {
      background: radial-gradient(ellipse at top, #1a0f3d 0%, #0a0520 50%, #000000 100%);
      position: relative;
    }
    
    /* Ramadan Lanterns */
    .ramadan-lantern {
      position: fixed;
      font-size: 2.5rem;
      animation: sway 4s ease-in-out infinite, glow-lantern 2s ease-in-out infinite, fade-lantern 6s ease-in-out infinite;
      filter: drop-shadow(0 0 10px var(--primary));
      z-index: 1;
      pointer-events: none;
      opacity: 0.7;
    }
    
    @keyframes sway {
      0%, 100% { transform: rotate(-5deg); }
      50% { transform: rotate(5deg); }
    }
    
    @keyframes glow-lantern {
      0%, 100% { 
        filter: drop-shadow(0 0 10px var(--primary)) drop-shadow(0 0 20px var(--primary));
      }
      50% { 
        filter: drop-shadow(0 0 20px var(--primary)) drop-shadow(0 0 30px var(--primary)) drop-shadow(0 0 40px rgba(212, 175, 55, 0.5));
      }
    }
    
    @keyframes fade-lantern {
      0%, 100% { opacity: 0.7; }
      25% { opacity: 0; }
      50% { opacity: 0.7; }
      75% { opacity: 0; }
    }
    
    /* Ramadan Stars */
    .ramadan-star {
      position: fixed;
      color: #ffd700;
      font-size: 0.8rem;
      animation: twinkle-fade 4s ease-in-out infinite;
      z-index: 1;
      pointer-events: none;
      opacity: 0.5;
    }
    
    @keyframes twinkle-fade {
      0% { opacity: 0.5; transform: scale(1); }
      25% { opacity: 0; transform: scale(0.8); }
      50% { opacity: 0.8; transform: scale(1.2); }
      75% { opacity: 0; transform: scale(0.8); }
      100% { opacity: 0.5; transform: scale(1); }
    }
    
    /* Ramadan Moon */
    .ramadan-moon {
      position: fixed;
      top: 50px;
      right: 50px;
      font-size: 4rem;
      animation: moon-glow 4s ease-in-out infinite;
      z-index: 1;
      pointer-events: none;
      opacity: 0.8;
    }
    
    [dir="rtl"] .ramadan-moon {
      right: auto;
      left: 50px;
    }
    
    @keyframes moon-glow {
      0%, 100% { 
        filter: drop-shadow(0 0 20px #ffd700) drop-shadow(0 0 40px rgba(255, 215, 0, 0.5));
        transform: scale(1);
      }
      50% { 
        filter: drop-shadow(0 0 30px #ffd700) drop-shadow(0 0 60px rgba(255, 215, 0, 0.8));
        transform: scale(1.05);
      }
    }

    /* Dark Theme */
    .theme-dark-mode {
      --primary: #6c5ce7;
      --primary-hover: #5b4cdb;
      --secondary: #00cec9;
      --bg-primary: #1a1a2e;
      --bg-secondary: #16213e;
      --bg-card: #0f3460;
      --text-primary: #ffffff;
      --text-secondary: #b2bec3;
      --text-muted: #636e72;
    }

    /* Light Theme */
    .theme-light-mode {
      --bg-primary: #f5f5f5;
      --bg-secondary: #ffffff;
      --bg-card: #e8e8e8;
      --text-primary: #1a1a2e;
      --text-secondary: #555555;
      --text-muted: #888888;
    }

    /* Modern Theme */
    .theme-modern-mode {
      --primary: #667eea;
      --primary-hover: #5a6fd6;
      --secondary: #764ba2;
      --bg-primary: #0f0c29;
      --bg-secondary: #302b63;
      --bg-card: #24243e;
      background: linear-gradient(135deg, #0f0c29 0%, #302b63 50%, #24243e 100%);
    }
    
    .theme-modern-mode .app-wrapper {
      background: linear-gradient(135deg, #0f0c29 0%, #302b63 50%, #24243e 100%);
      position: relative;
    }
    
    .theme-modern-mode .app-wrapper::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      border: 3px solid transparent;
      border-radius: 0;
      background: linear-gradient(90deg, 
        #667eea 0%, 
        #764ba2 25%, 
        #f093fb 50%, 
        #4facfe 75%, 
        #667eea 100%
      ) border-box;
      -webkit-mask: linear-gradient(#fff 0 0) padding-box, linear-gradient(#fff 0 0);
      -webkit-mask-composite: xor;
      mask-composite: exclude;
      pointer-events: none;
      z-index: 9999;
      animation: neonBorderFlow 6s linear infinite;
      box-shadow: inset 0 0 20px rgba(102, 126, 234, 0.5),
                  inset 0 0 40px rgba(118, 75, 162, 0.3),
                  0 0 20px rgba(102, 126, 234, 0.5),
                  0 0 40px rgba(118, 75, 162, 0.3);
    }
    
    @keyframes neonBorderFlow {
      0% {
        background-position: 0% 50%;
        filter: hue-rotate(0deg);
      }
      50% {
        background-position: 100% 50%;
        filter: hue-rotate(60deg);
      }
      100% {
        background-position: 0% 50%;
        filter: hue-rotate(0deg);
      }
    }
    
    .theme-modern-mode .btn {
      position: relative;
      overflow: visible;
      animation: neon-color-shift 8s ease-in-out infinite;
    }
    
    .theme-modern-mode .btn-primary {
      animation: neon-pulse 2s ease-in-out infinite, neon-color-shift 8s ease-in-out infinite;
      box-shadow: 0 0 10px rgba(102, 126, 234, 0.5), 
                  0 0 20px rgba(102, 126, 234, 0.3), 
                  0 0 30px rgba(102, 126, 234, 0.2);
    }
    
    .theme-modern-mode .btn-primary:hover {
      animation: neon-pulse-hover 1s ease-in-out infinite, neon-color-shift 8s ease-in-out infinite;
      box-shadow: 0 0 20px rgba(102, 126, 234, 0.8), 
                  0 0 40px rgba(102, 126, 234, 0.6), 
                  0 0 60px rgba(102, 126, 234, 0.4),
                  0 0 80px rgba(102, 126, 234, 0.2);
    }
    
    .theme-modern-mode .btn-secondary {
      box-shadow: 0 0 10px rgba(118, 75, 162, 0.3), 
                  0 0 20px rgba(118, 75, 162, 0.2);
      animation: neon-pulse-secondary 3s ease-in-out infinite, neon-color-shift-secondary 10s ease-in-out infinite;
    }
    
    .theme-modern-mode .btn-secondary:hover {
      box-shadow: 0 0 20px rgba(118, 75, 162, 0.6), 
                  0 0 40px rgba(118, 75, 162, 0.4), 
                  0 0 60px rgba(118, 75, 162, 0.2);
    }
    
    .theme-modern-mode .btn-danger {
      animation: neon-color-shift-danger 7s ease-in-out infinite;
    }
    
    .theme-modern-mode .btn-success {
      animation: neon-color-shift-success 9s ease-in-out infinite;
    }
    
    @keyframes neon-pulse {
      0%, 100% {
        box-shadow: 0 0 10px rgba(102, 126, 234, 0.5), 
                    0 0 20px rgba(102, 126, 234, 0.3), 
                    0 0 30px rgba(102, 126, 234, 0.2);
      }
      50% {
        box-shadow: 0 0 20px rgba(102, 126, 234, 0.8), 
                    0 0 30px rgba(102, 126, 234, 0.5), 
                    0 0 40px rgba(102, 126, 234, 0.3);
      }
    }
    
    @keyframes neon-pulse-hover {
      0%, 100% {
        box-shadow: 0 0 20px rgba(102, 126, 234, 0.8), 
                    0 0 40px rgba(102, 126, 234, 0.6), 
                    0 0 60px rgba(102, 126, 234, 0.4);
      }
      50% {
        box-shadow: 0 0 30px rgba(102, 126, 234, 1), 
                    0 0 60px rgba(102, 126, 234, 0.8), 
                    0 0 90px rgba(102, 126, 234, 0.6),
                    0 0 120px rgba(102, 126, 234, 0.4);
      }
    }
    
    @keyframes neon-pulse-secondary {
      0%, 100% {
        box-shadow: 0 0 10px rgba(118, 75, 162, 0.3), 
                    0 0 20px rgba(118, 75, 162, 0.2);
      }
      50% {
        box-shadow: 0 0 15px rgba(118, 75, 162, 0.5), 
                    0 0 30px rgba(118, 75, 162, 0.3);
      }
    }
    
    @keyframes neon-color-shift {
      0%, 100% {
        filter: hue-rotate(0deg);
      }
      33% {
        filter: hue-rotate(30deg);
      }
      66% {
        filter: hue-rotate(-30deg);
      }
    }
    
    @keyframes neon-color-shift-secondary {
      0%, 100% {
        filter: hue-rotate(0deg);
      }
      50% {
        filter: hue-rotate(40deg);
      }
    }
    
    @keyframes neon-color-shift-danger {
      0%, 100% {
        filter: hue-rotate(0deg) brightness(1);
      }
      50% {
        filter: hue-rotate(20deg) brightness(1.2);
      }
    }
    
    @keyframes neon-color-shift-success {
      0%, 100% {
        filter: hue-rotate(0deg) brightness(1);
      }
      50% {
        filter: hue-rotate(-20deg) brightness(1.15);
      }
    }

    /* Snow Theme */
    .theme-snow-mode {
      --primary: #74b9ff;
      --primary-hover: #5ea8f5;
      --secondary: #81ecec;
      --bg-primary: #e8f4f8;
      --bg-secondary: #ffffff;
      --bg-card: #cfe9f3;
      --text-primary: #2d3436;
      --text-secondary: #636e72;
    }

    /* Back Button */
    .back-btn {
      position: absolute;
      top: 70px;
      left: 20px;
      z-index: 100;
    }

    [dir="rtl"] .back-btn {
      left: auto;
      right: 20px;
    }

    .header-bar {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 12px;
      margin-bottom: 20px;
    }
    
    .header-bar .btn-small {
      width: 120px;
      align-self: flex-start;
    }
    
    [dir="rtl"] .header-bar .btn-small {
      align-self: flex-start;
    }

    .page-title {
      font-size: 1.8rem;
      font-weight: 700;
      color: var(--secondary);
      text-align: center;
    }

    /* Empty State */
    .empty-state {
      text-align: center;
      padding: 40px;
      color: var(--text-muted);
    }

    .empty-icon {
      font-size: 4rem;
      margin-bottom: 16px;
    }

    /* Toast */
    .toast {
      position: fixed;
      bottom: 100px;
      left: 50%;
      transform: translateX(-50%) translateY(100px);
      background: var(--bg-card);
      color: var(--text-primary);
      padding: 16px 24px;
      border-radius: 12px;
      box-shadow: var(--shadow);
      z-index: 3000;
      opacity: 0;
      transition: var(--transition);
    }

    .toast.show {
      transform: translateX(-50%) translateY(0);
      opacity: 1;
    }
    
    /* Winner Splash Screen */
    .winner-splash {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, var(--bg-primary), var(--bg-secondary));
      display: none;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      z-index: 5000;
      padding: 20px;
      overflow-y: auto;
      overflow-x: hidden;
    }
    
    .winner-splash.show {
      display: flex;
      animation: fadeIn 0.5s ease;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    .winner-trophy {
      font-size: 6rem;
      animation: trophy-bounce 1s ease infinite;
      margin-bottom: 20px;
      margin-top: 20px;
    }
    
    @keyframes trophy-bounce {
      0%, 100% { transform: translateY(0) scale(1); }
      50% { transform: translateY(-20px) scale(1.1); }
    }
    
    .winner-title {
      font-size: 2rem;
      font-weight: 800;
      color: var(--warning);
      text-align: center;
      margin-bottom: 16px;
      text-shadow: 0 0 20px rgba(243, 156, 18, 0.5);
    }
    
    .winner-name {
      font-size: 2.5rem;
      font-weight: 900;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 30px;
      animation: pulse 2s ease infinite;
      text-align: center;
    }
    
    .winner-scores {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border-radius: var(--border-radius);
      padding: 20px;
      width: 100%;
      max-width: 400px;
      margin-bottom: 20px;
      max-height: 40vh;
      overflow-y: auto;
    }
    
    .winner-score-title {
      font-size: 1.2rem;
      font-weight: 700;
      color: var(--text-secondary);
      margin-bottom: 16px;
      text-align: center;
    }
    
    .winner-score-item {
      display: flex;
      justify-content: space-between;
      padding: 10px;
      margin-bottom: 8px;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 8px;
    }
    
    .confetti {
      position: fixed;
      width: 10px;
      height: 10px;
      background: var(--primary);
      animation: confetti-fall 3s linear infinite;
    }
    
    @keyframes confetti-fall {
      0% {
        transform: translateY(-100vh) rotate(0deg);
        opacity: 1;
      }
      100% {
        transform: translateY(100vh) rotate(720deg);
        opacity: 0;
      }
    }

    /* Responsive */
    @media (max-width: 480px) {
      .splash-title, .menu-title {
        font-size: 1.8rem;
      }

      .role-card {
        width: 240px;
        height: 340px;
      }

      .spinner-wheel {
        width: 220px;
        height: 220px;
      }
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
 </head>
 <body>
  <div class="app-wrapper" id="app"><!-- News Ticker -->
   <div class="news-ticker"><span class="ticker-label" id="ticker-label">ÿ≤ÿßŸÜ€åÿßÿ±€å</span>
    <div class="ticker-track">
     <div class="ticker-content" id="ticker-content">
      ‚Ä¢ ÿ®€ïÿÆ€éÿ±ÿ®€éŸÜ ÿ®€Ü ŸÜŸà€éÿ™ÿ±€åŸÜ ÿ¶€ïŸæÿØ€ï€åÿ™€å €åÿßÿ±€å ⁄©Ÿàÿ±ÿØÿ¥ ÿ¶€åŸÖŸæ€Üÿ≥ÿ™€ïÿ± ! ................... ÿ¶€ïŸÖ ÿ¶€ïŸæÿØ€ï€åÿ™€ï ÿ≤€Üÿ±ÿ™ÿ±€åŸÜ ⁄Ø€Ü⁄ïÿßŸÜ⁄©ÿßÿ±€å ŸÑ€ïÿÆ€ÜÿØ€ï⁄Ø€éÿ™ ! .................. ÿßÿ≥ÿ™ÿÆŸÅÿ± ÿßŸÑŸÑŸá ,ÿ≥ÿ®ÿ≠ÿßŸÜ ÿßŸÑŸÑŸáÿå ŸàÿßŸÑÿ≠ŸÖÿØ ŸÑŸÑŸáÿå Ÿà ŸÑÿß ÿ•ŸÑŸá ÿ•ŸÑÿß ÿßŸÑŸÑŸá ŸàÿßŸÑŸÑŸá ÿ£ŸÉÿ®ÿ±, Ÿàÿ≠ÿØŸá ŸÑÿß ÿ¥ÿ±ŸäŸÉ ŸÑŸáÿå ŸÑŸá ÿßŸÑŸÖŸÑŸÉÿå ŸàŸÑŸá ÿßŸÑÿ≠ŸÖÿØÿå ŸàŸáŸà ÿπŸÑŸâ ŸÉŸÑ ÿ¥Ÿäÿ° ŸÇÿØŸäÿ±
     </div>
    </div>
   </div><!-- Splash Screen -->
   <div class="screen active" id="splash-screen">
    <div class="splash-content">
     <div class="splash-logo">
      üé≠
     </div>
     <h1 class="splash-title" id="splash-title">Kurdish Imposter</h1>
     <div class="splash-spinner"></div>
    </div>
   </div><!-- Main Menu -->
   <div class="screen" id="menu-screen">
    <div class="menu-content">
     <div class="menu-logo">
      üé≠
     </div>
     <h1 class="menu-title" id="menu-title">Kurdish Imposter</h1><button class="btn btn-primary" onclick="showScreen('setup-screen')" id="btn-start"> <span>üéÆ</span> <span data-i18n="startGame">Start Game</span> </button> <button class="btn btn-secondary" onclick="showScreen('settings-screen')" id="btn-settings"> <span>‚öôÔ∏è</span> <span data-i18n="settings">Settings</span> </button> <button class="btn btn-secondary" onclick="showScreen('history-screen')" id="btn-history"> <span>üìä</span> <span data-i18n="gameHistory">Game History</span> </button> <button class="btn btn-secondary" onclick="showScreen('updates-screen')" id="btn-updates"> <span>üì∞</span> <span data-i18n="updates">Updates</span> </button>
    </div>
    <!-- Footer -->
    <footer style="position: fixed; bottom: 0; left: 0; width: 100%; text-align: center; font-size: 0.9rem; color: var(--text-muted); background: var(--bg-card); padding: 10px 0;">
      Developed By : <strong>Didar Baxtear</strong>
    </footer>
   </div><!-- Game Setup -->
   <div class="screen" id="setup-screen">
    <div class="header-bar"><button class="btn btn-secondary btn-small" onclick="showScreen('menu-screen')"> <span>‚Üê</span> <span data-i18n="back">Back</span> </button>
     <h2 class="page-title" data-i18n="gameSetup">Game Setup</h2>
     <div style="width: 80px;"></div>
    </div>
    <div class="card">
     <h3 class="card-title" data-i18n="numberOfPlayers">Number of Players</h3>
     <div class="number-control"><button class="btn btn-secondary btn-icon" onclick="adjustPlayers(-1)">‚àí</button> <span class="number-display" id="player-count">4</span> <button class="btn btn-secondary btn-icon" onclick="adjustPlayers(1)">+</button>
     </div>
    </div>
    <div class="card" style="margin-top: 20px;">
     <h3 class="card-title" data-i18n="numberOfImposters">Number of Imposters</h3>
     <div class="number-control"><button class="btn btn-secondary btn-icon" onclick="adjustImposters(-1)">‚àí</button> <span class="number-display" id="imposter-count">1</span> <button class="btn btn-secondary btn-icon" onclick="adjustImposters(1)">+</button>
     </div>
    </div>
    <div class="card" style="margin-top: 20px;">
     <h3 class="card-title" data-i18n="playerNames">Player Names</h3>
     <div class="player-list" id="player-list"></div>
    </div><button class="btn btn-primary" style="margin-top: 20px;" onclick="showCustomWordModal()"> <span>üéØ</span> <span data-i18n="startRound">Start Round</span> </button>
   </div><!-- Gameplay Screen -->
   <div class="screen" id="gameplay-screen">
    <div class="role-card-container">
     <div class="current-player-name" id="current-player-name">
      Player 1
     </div>
     <div class="role-card" id="role-card" onclick="flipCard()">
      <div class="role-card-inner">
       <div class="role-card-front">
        <div class="role-card-front-icon">
         üëÜ
        </div>
        <div class="role-card-front-text" data-i18n="tapToReveal">
         Tap to reveal your role
        </div>
       </div>
       <div class="role-card-back civilian" id="role-card-back">
        <div class="role-icon" id="role-icon">
         ÔøΩÔøΩÔøΩ
        </div>
        <div class="role-title" id="role-title">
         Civilian
        </div>
        <div class="role-word" id="role-word">
         Secret Word
        </div>
        <div class="role-hint" id="role-hint">
         Hint: Category
        </div>
       </div>
      </div>
     </div><button class="btn btn-primary pass-phone-btn" id="pass-phone-btn" onclick="nextPlayer()" style="display: none;"> <span>üì±</span> <span data-i18n="passPhone">Pass the Phone</span> </button>
    </div>
   </div><!-- Discussion Screen -->
   <div class="screen" id="discussion-screen">
    <div class="card-picker-container">
     <h2 class="page-title" data-i18n="whoStarts">Who starts the discussion?</h2>
     <div class="card-picker-grid" id="card-picker-grid"></div>
     <div class="card-picker-result" id="card-picker-result" style="display: none;">
      <p class="card-picker-result-text" data-i18n="startsFirst">Starts first:</p>
      <div class="card-picker-result-name" id="card-picker-result-name"></div>
     </div>
     <div class="card-picker-buttons"><button class="btn btn-primary" id="start-picker-btn" onclick="startCardPicker()"> <span>üé≤</span> <span data-i18n="start">Start</span> </button> <button class="btn btn-secondary" style="display: none;" onclick="showScreen('scoring-screen')" id="end-discussion-btn"> <span>‚úÖ</span> <span data-i18n="endDiscussion">End Discussion</span> </button>
     </div>
    </div>
   </div><!-- Scoring Screen -->
   <div class="screen" id="scoring-screen">
    <div class="header-bar"><button class="btn btn-secondary btn-small" onclick="showScreen('discussion-screen')"> <span>‚Üê</span> <span data-i18n="back">Back</span> </button>
     <h2 class="page-title" data-i18n="scoring">Scoring</h2>
     <div style="width: 80px;"></div>
    </div>
    <div class="card">
     <h3 class="card-title" data-i18n="roundResults">Round Results</h3>
     <div id="score-list" class="scoreboard"></div>
    </div><button class="btn btn-success" style="margin-top: 20px;" onclick="saveScores()"> <span>üíæ</span> <span data-i18n="saveAndNewRound">Save &amp; New Round</span> </button> <button class="btn btn-secondary" style="margin-top: 12px;" onclick="endGame()"> <span>üèÅ</span> <span data-i18n="endGame">End Game</span> </button>
   </div><!-- Settings Screen -->
   <div class="screen" id="settings-screen">
    <div class="settings-content">
     <div class="header-bar"><button class="btn btn-secondary btn-small" onclick="showScreen('menu-screen')"> <span>‚Üê</span> <span data-i18n="back">Back</span> </button>
      <h2 class="page-title" data-i18n="settings">Settings</h2>
      <div style="width: 80px;"></div>
     </div>
     <div class="settings-section">
      <h3 class="settings-title" data-i18n="language">Language</h3>
      <div class="lang-toggle"><button class="lang-btn active" id="lang-en" onclick="setLanguage('en')">English</button> <button class="lang-btn" id="lang-ku" onclick="setLanguage('ku')">⁄©Ÿàÿ±ÿØ€å</button>
      </div>
     </div>
     <div class="settings-section">
      <h3 class="settings-title" data-i18n="theme">Theme</h3>
      <div class="theme-selector"><button class="theme-btn theme-ramadan active" data-name="Ramadan" onclick="setTheme('ramadan')">üèÆ</button> <button class="theme-btn theme-dark" data-name="Dark" onclick="setTheme('dark')">üåô</button> <button class="theme-btn theme-light" data-name="Light" onclick="setTheme('light')">‚òÄÔ∏è</button> <button class="theme-btn theme-modern" data-name="Modern" onclick="setTheme('modern')">‚ö°</button> <button class="theme-btn theme-snow" data-name="Snow" onclick="setTheme('snow')">‚ùÑÔ∏è</button>
      </div>
     </div>
     <div class="settings-section" style="margin-top: 40px;">
      <h3 class="settings-title" data-i18n="sound">Sound</h3><button class="btn btn-secondary mute-btn" id="mute-btn" onclick="toggleMute()"> <span id="mute-icon">üîä</span> <span data-i18n="soundOn">Sound On</span> </button>
     </div>
     <div class="settings-section">
      <h3 class="settings-title" data-i18n="newsTicker">News Ticker</h3><button class="btn btn-secondary" id="ticker-toggle-btn" onclick="toggleNewsTicker()"> <span>üì∞</span> <span data-i18n="hideNews">Hide News</span> </button>
     </div>
     <div class="settings-section"><button class="btn btn-secondary" onclick="toggleWordEditor()"> <span>üìù</span> <span data-i18n="wordEditor">Word Editor</span> </button>
      <div class="word-editor" id="word-editor" style="display: none;">
       <div class="form-group"><label class="form-label" data-i18n="englishWord">English Word</label> <input type="text" class="form-input" id="new-word-en" placeholder="Enter word">
       </div>
       <div class="form-group"><label class="form-label" data-i18n="kurdishWord">Kurdish Word</label> <input type="text" class="form-input" id="new-word-ku" placeholder="Ÿàÿ¥€ï ÿ®ŸÜŸàŸàÿ≥€ï">
       </div>
       <div class="form-group"><label class="form-label" data-i18n="hint">Hint/Category</label> <input type="text" class="form-input" id="new-word-hint" placeholder="Category">
       </div><button class="btn btn-success btn-small" onclick="addCustomWord()"> <span>‚ûï</span> <span data-i18n="addWord">Add Word</span> </button>
       <div class="word-list" id="custom-word-list"></div>
      </div>
     </div>
     <div class="settings-section" style="margin-top: 30px;"><button class="btn btn-secondary" onclick="window.open('https://github.com/Didar122?tab=repositories', '_blank', 'noopener,noreferrer')"> <span>üéÆ</span> <span data-i18n="moreGames">More Games</span> </button>
     </div>
     <div class="settings-section"><button class="btn btn-danger" onclick="showClearDataModal()"> <span>üóëÔ∏è</span> <span data-i18n="clearAllData">Clear All Data</span> </button>
     </div>
     <div class="settings-section"><button class="btn btn-secondary" onclick="showAboutModal()"> <span>‚ÑπÔ∏è</span> <span data-i18n="about">About</span> </button>
     </div>
    </div>
   </div><!-- Updates Screen -->
   <div class="screen" id="updates-screen">
    <div class="header-bar"><button class="btn btn-secondary btn-small" onclick="showScreen('menu-screen')"> <span>‚Üê</span> <span data-i18n="back">Back</span> </button>
     <h2 class="page-title" data-i18n="updates">Updates</h2>
     <div style="width: 80px;"></div>
    </div>
    <div class="updates-list">
     <div class="update-item">
      <div class="update-version">
       v2.0.4
      </div>
      <div class="update-content">
       ‚öí ⁄Üÿß⁄©ÿ±ÿØŸÜ€å ⁄Øÿ¥ÿ™ ⁄©€éÿ¥€ï⁄©ÿßŸÜ€å €åÿßÿ±€å€ï⁄©€ï
      </div>
     </div>
     <div class="update-item">
      <div class="update-version">
       v2.0.3
      </div>
      <div class="update-content">
       üéâ ⁄Ø€Ü⁄ïÿßŸÜ⁄©ÿßÿ±€å ⁄Ø€ïŸàÿ±€ï ŸÑ€ï ÿ¥⁄©⁄µ Ÿà ÿ¥€éŸàÿßÿ≤€å €åÿßÿ±€å€ï⁄©€ï<br>
       üåô ÿ≤€åÿßÿØ⁄©ÿ±ÿØŸÜ€å ŸÖ€ÜÿØ€å ⁄ï€ïŸÖ€ïÿ≤ÿßŸÜ<br>
        üí¨ ÿ≤€åÿßÿØ⁄©ÿ±ÿØŸÜ€å ÿ≥€åÿ≥ÿ™€ïŸÖ€å ÿØŸàÿ®ÿßÿ±€ïŸÜ€ïÿ®ŸàŸÜ€ïŸà€ï€å Ÿàÿ¥€ï⁄©ÿßŸÜ<br>
        üíº ⁄ØŸàŸÜÿ¨ÿßŸÜÿØŸÜ ŸÑ€ï⁄Ø€ï⁄µ ÿ≤€Üÿ±€åŸÜ€ï€å ÿ≥€åÿ≥ÿ™€ïŸÖ€ï⁄©ÿßŸÜ Ÿà⁄Ü€ïŸÜÿØ€ïŸáÿß ⁄Ø€Ü⁄ïÿßŸÜ⁄©ÿßÿ±€å ÿ™ÿ±
      </div>
     </div>
     <div class="update-item">
      <div class="update-version">
       v1.0.9
      </div>
      <div class="update-content">
       ‚ö´Ô∏è ÿ≤€åÿßÿØ⁄©ÿ±ÿØ€å ÿ≥€åŸÖ€é⁄© ÿ®€ïÿ®€ÜŸÜ€ï€å ÿ≥€ïÿ±€å ÿ≥ÿß⁄µ€å ÿ≤ÿß€åŸÜ€å€ïŸà€ï <br>
       ‚ö´Ô∏è ÿ≤€åÿßÿØ⁄©ÿ±ÿØŸÜ€å Ÿàÿ¥€ï⁄©ÿßŸÜ ŸÑ€ï ( 340 ) Ÿàÿ¥€ïŸà€ï ÿ®€Ü ÿ≤€åÿßÿ™ÿ± ŸÑ€ï ( 1060 ) Ÿàÿ¥€ï<br>
       ‚ö´Ô∏è ÿ≤€åÿßÿØ⁄©ÿ±ÿØŸÜ€å ÿ¥ÿ±€åÿ™€å Ÿá€ïŸàÿß⁄µ Ÿà ÿ≤ÿßŸÜ€åÿßÿ±€å€ï⁄©ÿßŸÜ ÿ®€Ü ÿ®€ïÿ¥€å ÿ≥€ïÿ±€ïŸà€ï€å Ÿæ€ï⁄ï€ï€å ÿ≥€ïÿ±€ï⁄©€å
      </div>
     </div>
    </div>
   </div><!-- History Screen -->
   <div class="screen" id="history-screen">
    <div class="header-bar"><button class="btn btn-secondary btn-small" onclick="showScreen('menu-screen')"> <span>‚Üê</span> <span data-i18n="back">Back</span> </button>
     <h2 class="page-title" data-i18n="gameHistory">Game History</h2>
     <div style="width: 80px;"></div>
    </div>
    <div id="history-list">
     <div class="empty-state">
      üìä
      <p data-i18n="noHistory">No game history yet. Play some games!</p>
     </div>
    </div>
   </div><!-- Custom Word Modal -->
   <div class="modal-overlay" id="custom-word-modal">
    <div class="modal">
     <h3 class="modal-title" data-i18n="customWord">Custom Word</h3>
     <p class="modal-text" data-i18n="customWordDesc">Enter a custom word for this round or leave empty for random.</p>
     <div class="form-group"><input type="text" class="form-input" id="custom-round-word" placeholder="Enter custom word (optional)">
     </div>
     <div class="modal-actions"><button class="btn btn-secondary" onclick="closeModal('custom-word-modal')"> <span data-i18n="cancel">Cancel</span> </button> <button class="btn btn-primary" onclick="startGame()"> <span data-i18n="start">Start</span> </button>
     </div>
    </div>
   </div><!-- Clear Data Modal -->
   <div class="modal-overlay" id="clear-data-modal">
    <div class="modal">
     <h3 class="modal-title" data-i18n="confirmClear">ÔøΩÔøΩÔøΩÔøΩ Confirm Clear</h3>
     <p class="modal-text" data-i18n="clearDataDesc">This will delete all game history, custom words, and settings. This cannot be undone!</p>
     <div class="modal-actions"><button class="btn btn-secondary" onclick="closeModal('clear-data-modal')"> <span data-i18n="cancel">Cancel</span> </button> <button class="btn btn-danger" onclick="clearAllData()"> <span data-i18n="clearAll">Clear All</span> </button>
     </div>
    </div>
   </div><!-- About Modal -->
   <div class="modal-overlay" id="about-modal">
    <div class="modal">
     <h3 class="modal-title">üé≠ Kurdish Imposter</h3>
     <p class="modal-text">Version 2.0.4<br><br>
       A fun party game for 3-20 players!<br>
       Find the imposter who doesn't know the secret word.<br><br>
       Made with ‚ù§Ô∏è for Kurdish communities<br><br><br>
       Developed By : Didar Baxtear.</p>
     <div class="modal-actions"><button class="btn btn-primary" onclick="closeModal('about-modal')" style="width: 100%;"> <span data-i18n="close">Close</span> </button>
     </div>
    </div>
   </div><!-- Toast -->
   <div class="toast" id="toast"></div><!-- Winner Splash Screen -->
   <div class="winner-splash" id="winner-splash">
    <div class="winner-trophy">
     üèÜ
    </div>
    <h1 class="winner-title" id="winner-title-text" data-i18n="winner">Winner!</h1>
    <div class="winner-name" id="winner-name"></div>
    <div class="winner-scores" id="winner-scores-list">
     <h3 class="winner-score-title" data-i18n="finalScores">Final Scores</h3>
     <div id="winner-scores-content"></div>
    </div><button class="btn btn-primary" onclick="closeWinnerSplash()"> <span data-i18n="continue">Continue</span> </button>
   </div>
  </div>
  <script>
    // Word Database
    const wordDatabase = [
      { en: "Pizza", ku: "Ÿæ€åÿ™ÿ≤ÿß", hint: { en: "Food/Drink", ku: "ÿÆŸàÿßÿ±ÿØŸÜ / ÿÆŸàÿßÿ±ÿØŸÜ€ïŸà€ï" } },
      { en: "Ocean", ku: "ÿ≤€ïÿ±€åÿß", hint: { en: "Nature/Geography", ku: "ÿ≥ÿ±Ÿàÿ¥ÿ™ / ÿ¨Ÿà⁄Øÿ±ÿßŸÅ€åÿß" } },
      { en: "Guitar", ku: "⁄Ø€åÿ™ÿßÿ±", hint: { en: "Object/Item", ku: "ÿ¥ÿ™ / ⁄©€ïŸÑŸàŸæ€ïŸÑ" } },
      { en: "Clarinet", ku: "⁄©ŸÑÿßÿ±€åŸÜ€éÿ™ - ÿ¶ÿßŸÖ€éÿ±€å ŸÖ€Üÿ≥€åŸÇÿß", hint: { en: "Music & Instruments", ku: "ÿ¥ÿ™ / ⁄©€ïŸÑŸàŸæ€ïŸÑ" } },
      { en: "Accordion", ku: "ŸÅŸÑŸàŸàÿ™ - ÿ¶ÿßŸÖ€éÿ±€å ŸÖ€Üÿ≥€åŸÇÿß", hint: { en: "Music & Instruments", ku: "ÿ¥ÿ™ / ⁄©€ïŸÑŸàŸæ€ïŸÑ" } }
    ];

    // Translations
    const translations = {
      en: {
        startGame: "Start Game",
        settings: "Settings",
        gameHistory: "Game History",
        updates: "Updates",
        back: "Back",
        gameSetup: "Game Setup",
        numberOfPlayers: "Number of Players",
        numberOfImposters: "Number of Imposters",
        playerNames: "Player Names",
        startRound: "Start Round",
        tapToReveal: "Tap to reveal your role",
        passPhone: "Pass the Phone",
        whoStarts: "Who starts the discussion?",
        tapToSpin: "Tap to spin!",
        startsFirst: "Starts first:",
        spin: "Spin!",
        endDiscussion: "End Discussion",
        scoring: "Scoring",
        roundResults: "Round Results",
        saveAndNewRound: "Save &amp; New Round",
               endGame: "End Game",
        language: "Language",
        theme: "Theme",
        sound: "Sound",
        soundOn: "Sound On",
        soundOff: "Sound Off",
        newsTicker: "News Ticker",
        showNews: "Show News",
        hideNews: "Hide News",
        wordEditor: "Word Editor",
        englishWord: "English Word",
        kurdishWord: "Kurdish Word",
        hint: "Hint/Category",
        addWord: "Add Word",
        moreGames: "More Games",
        clearAllData: "Clear All Data",
        about: "About",
        confirmClear: "‚ö†Ô∏è Confirm Clear",
        clearDataDesc: "This will delete all game history, custom words, and settings. This cannot be undone!",
        cancel: "Cancel",
        clearAll: "Clear All",
        close: "Close",
        customWord: "Custom Word",
        customWordDesc: "Enter a custom word for this round or leave empty for random.",
        start: "Start",
        noHistory: "No game history yet. Play some games!",
        civilian: "Civilian",
        imposter: "Imposter",
        yourWord: "Your word:",
        noWord: "You don't know the word!",
        player: "Player",
        tickerInfo: "Information",
        winner: "Winner!",
        finalScores: "Final Scores",
        continue: "Continue"
      },
      ku: {
        startGame: "ÿØ€ïÿ≥ÿ™Ÿæ€é⁄©ÿ±ÿØŸÜ",
        settings: "⁄ï€é⁄©ÿÆÿ≥ÿ™ŸÜ€ï⁄©ÿßŸÜ",
        gameHistory: "ŸÖ€é⁄òŸàŸà€å €åÿßÿ±€å",
        updates: "ŸÜŸà€é⁄©ÿßÿ±€å€ï⁄©ÿßŸÜ",
        back: "⁄Ø€ï⁄ïÿßŸÜ€ïŸà€ï",
        gameSetup: "⁄ï€é⁄©ÿÆÿ≥ÿ™ŸÜ€å €åÿßÿ±€å",
        numberOfPlayers: "⁄òŸÖÿßÿ±€ï€å €åÿßÿ±€åÿ≤ÿßŸÜ",
        numberOfImposters: "⁄òŸÖÿßÿ±€ï€å ÿ¶€åŸÖŸæ€Üÿ≥ÿ™€ïÿ±",
        playerNames: "ŸÜÿßŸà€å €åÿßÿ±€åÿ≤ÿßŸÜ€ï⁄©ÿßŸÜ",
        startRound: "ÿØ€ïÿ≥ÿ™Ÿæ€é⁄©ÿ±ÿØŸÜ€å ÿÆŸàŸÑ",
        tapToReveal: "⁄ï€Ü⁄µ€ï⁄©€ïÿ™ ÿ®ÿ≤ÿßŸÜ€ï",
        passPhone: "ŸÖ€Üÿ®ÿß€åŸÑ€ï⁄©€ï ÿ®⁄Ø€ï€å€ïŸÜ€ï",
        whoStarts: "⁄©€é ÿØ€ïÿ≥ÿ™ Ÿæ€éÿØ€ï⁄©ÿßÿ™ÿü",
        tapToSpin: "ÿØ€ïÿ≥ÿ™€å Ÿæ€éÿØÿßŸÜ€é!",
        startsFirst: "ŸÜÿßŸà€å €åÿßÿ±€åÿ≤ÿßŸÜ",
        spin: "ÿ®ÿ≥Ÿà⁄ï€éŸÜ€ï!",
        endDiscussion: "ÿØ€ïÿ≥ÿ™Ÿæ€é⁄©ÿ±ÿØŸÜ€å ⁄ØŸÅÿ™Ÿà⁄Ø€Ü",
        scoring: "ÿÆÿß⁄µ",
        roundResults: "ÿ¶€ïŸÜÿ¨ÿßŸÖ€å ÿÆŸàŸÑ",
        saveAndNewRound: "Ÿæÿßÿ¥€ï⁄©€ïŸàÿ™ Ÿà ÿÆŸàŸÑ€å ŸÜŸà€é",
        endGame: "⁄©€Üÿ™ÿß€å€å €åÿßÿ±€å",
        language: "ÿ≤ŸÖÿßŸÜ",
        theme: "ÿ™€ïŸÖÿß",
        sound: "ÿØ€ïŸÜ⁄Ø",
        soundOn: "ÿØ€ïŸÜ⁄Ø ⁄©ÿ±ÿØŸÜ€ïŸà€ï",
        soundOff: "ÿØ€ïŸÜ⁄Ø ⁄©Ÿà⁄òÿßŸÜÿØŸÜ€ïŸà€ï",
        newsTicker: "Ÿá€é⁄µ€å Ÿá€ïŸàÿß⁄µ",
        showNews: "ŸÜ€åÿ¥ÿßŸÜÿØÿßŸÜ€å Ÿá€ïŸàÿß⁄µ",
        hideNews: "ÿ¥ÿßÿ±ÿØŸÜ€ïŸà€ï€å Ÿá€ïŸàÿß⁄µ",
        wordEditor: "ÿØ€ïÿ≥ÿ™⁄©ÿßÿ±€å Ÿàÿ¥€ï",
        englishWord: "Ÿàÿ¥€ï€å ÿ¶€åŸÜ⁄ØŸÑ€åÿ≤€å",
        kurdishWord: "Ÿàÿ¥€ï€å ⁄©Ÿàÿ±ÿØ€å",
        hint: "ÿ¶ÿßŸÖÿß⁄ò€ï ",
        addWord: "ÿ≤€åÿßÿØ⁄©ÿ±ÿØŸÜ€å Ÿàÿ¥€ï",
        moreGames: "€åÿßÿ±€å ÿ≤€åÿßÿ™ÿ±",
        clearAllData: "ÿ≥⁄ï€åŸÜ€ïŸà€ï€å Ÿá€ïŸÖŸàŸà ÿØÿßÿ™ÿß",
        about: "ÿØ€ïÿ±ÿ®ÿßÿ±€ï",
        confirmClear: "‚ö†Ô∏è ÿØ⁄µŸÜ€åÿßÿ®ŸàŸàŸÜ€ïŸà€ï",
        clearDataDesc: "ÿ¶€ïŸÖ€ï Ÿá€ïŸÖŸàŸà ŸÖ€é⁄òŸàŸàÿå Ÿàÿ¥€ï ÿ™ÿß€åÿ®€ïÿ™€ï⁄©ÿßŸÜ Ÿà ⁄ï€é⁄©ÿÆÿ≥ÿ™ŸÜ€ï⁄©ÿßŸÜ ÿØ€ïÿ≥⁄ï€éÿ™€ïŸà€ï. ŸÜÿßÿ™ŸàÿßŸÜÿ±€éÿ™ ÿ®⁄Ø€ï⁄ï€éŸÜÿ±€éÿ™€ïŸà€ï!",
        cancel: "Ÿá€ï⁄µŸà€ïÿ¥ÿßŸÜÿØŸÜ€ïŸà€ï",
        clearAll: "ÿ≥⁄ï€åŸÜ€ïŸà€ï€å Ÿá€ïŸÖŸàŸà",
        close: "ÿØÿßÿÆÿ≥ÿ™ŸÜ",
        customWord: "Ÿàÿ¥€ï€å ÿ™ÿß€åÿ®€ïÿ™",
        customWordDesc: "Ÿàÿ¥€ï€å€ï⁄©€å ÿ™ÿß€åÿ®€ïÿ™ ÿ®ŸÜŸàŸàÿ≥€ï ÿ®€Ü ÿ¶€ïŸÖ ÿØ€ïŸàÿ±€ï €åÿßŸÜ ÿ®€ï ÿ®€ïÿ™ÿß⁄µ€å ÿ¨€é€å ÿ®Ÿá€é⁄µ€ï ÿ®€Ü Ÿá€ï⁄µÿ®⁄òÿßÿ±ÿØŸÜ€å Ÿàÿ¥€ï⁄©ÿßŸÜ€å ÿ≥€åÿ≥ÿ™€ïŸÖ",
        start: "ÿØ€ïÿ≥ÿ™Ÿæ€é⁄©ÿ±ÿØŸÜ",
        noHistory: "Ÿá€éÿ¥ÿ™ÿß ŸÖ€é⁄òŸàŸà€å €åÿßÿ±€å ŸÜ€å€å€ï. €åÿßÿ±€å ÿ®⁄©€ï!",
        civilian: "ÿ¶ÿßÿ≥ÿß€å€å",
        imposter: "ÿ¶€åŸÖŸæ€Üÿ≥ÿ™€ïÿ±",
        yourWord: "Ÿàÿ¥€ï⁄©€ïÿ™ :",
        noWord: "ÿ™€Ü Ÿàÿ¥€ï⁄©€ï ŸÜÿßÿ≤ÿßŸÜ€å!",
        player: "€åÿßÿ±€åÿ≤ÿßŸÜ",
        tickerInfo: "ÿ≤ÿßŸÜ€åÿßÿ±€å",
        winner: "ÿ®ÿ±ÿßŸà€ï!",
        finalScores: "ÿÆÿß⁄µ€å ⁄©€Üÿ™ÿß€å€å",
        continue: "ÿ®€ïÿ±ÿØ€ïŸàÿßŸÖÿ®ŸàŸàŸÜ"
      }
    };

    // Game State
    let gameState = {
      currentScreen: 'splash-screen',
      playerCount: 4,
      imposterCount: 1,
      players: [],
      imposters: [],
      currentWord: null,
      currentPlayerIndex: 0,
      scores: {},
      language: 'en',
      theme: 'ramadan',
      muted: false,
      customWords: [],
      gameHistory: [],
      usedWords: [],
      usedWordIds: [],
      newsTickerHidden: false
    };

    // Initialize
    function init() {
      loadSettings();
      updatePlayerList();
      
      setTimeout(() => {
        showScreen('menu-screen');
      }, 3500);

      if (window.elementSdk) {
        initElementSdk();
      }
    }

    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', init);
    } else {
      init();
    }

    function initElementSdk() {
      const defaultConfig = {
        game_title: 'Kurdish Imposter',
        primary_color: '#6c5ce7',
        secondary_color: '#00cec9',
        background_color: '#1a1a2e',
        text_color: '#ffffff',
        accent_color: '#fd79a8'
      };

      window.elementSdk.init({
        defaultConfig,
        onConfigChange: async (config) => {
          document.getElementById('splash-title').textContent = config.game_title || defaultConfig.game_title;
          document.getElementById('menu-title').textContent = config.game_title || defaultConfig.game_title;
          
          document.documentElement.style.setProperty('--primary', config.primary_color || defaultConfig.primary_color);
          document.documentElement.style.setProperty('--secondary', config.secondary_color || defaultConfig.secondary_color);
          document.documentElement.style.setProperty('--bg-primary', config.background_color || defaultConfig.background_color);
          document.documentElement.style.setProperty('--text-primary', config.text_color || defaultConfig.text_color);
          document.documentElement.style.setProperty('--accent', config.accent_color || defaultConfig.accent_color);
        },
        mapToCapabilities: (config) => ({
          recolorables: [
            {
              get: () => config.background_color || defaultConfig.background_color,
              set: (v) => window.elementSdk.setConfig({ background_color: v })
            },
            {
              get: () => config.primary_color || defaultConfig.primary_color,
              set: (v) => window.elementSdk.setConfig({ primary_color: v })
            },
            {
              get: () => config.text_color || defaultConfig.text_color,
              set: (v) => window.elementSdk.setConfig({ text_color: v })
            },
            {
              get: () => config.secondary_color || defaultConfig.secondary_color,
              set: (v) => window.elementSdk.setConfig({ secondary_color: v })
            },
            {
              get: () => config.accent_color || defaultConfig.accent_color,
              set: (v) => window.elementSdk.setConfig({ accent_color: v })
            }
          ],
          borderables: [],
          fontEditable: undefined,
          fontSizeable: undefined
        }),
        mapToEditPanelValues: (config) => new Map([
          ['game_title', config.game_title || defaultConfig.game_title]
        ])
      });
    }

    // Screen Management
    function showScreen(screenId) {
      document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
      document.getElementById(screenId).classList.add('active');
      gameState.currentScreen = screenId;
    }

    // Player Management
    function adjustPlayers(delta) {
      const newCount = Math.max(3, Math.min(20, gameState.playerCount + delta));
      if (newCount !== gameState.playerCount) {
        gameState.playerCount = newCount;
        document.getElementById('player-count').textContent = newCount;
        
        if (gameState.imposterCount >= newCount) {
          gameState.imposterCount = Math.max(1, Math.floor(newCount / 3));
          document.getElementById('imposter-count').textContent = gameState.imposterCount;
        }
        
        updatePlayerList();
      }
    }

    function adjustImposters(delta) {
      const maxImposters = Math.min(5, Math.floor(gameState.playerCount / 2));
      const newCount = Math.max(1, Math.min(maxImposters, gameState.imposterCount + delta));
      gameState.imposterCount = newCount;
      document.getElementById('imposter-count').textContent = newCount;
    }

    function updatePlayerList() {
      const list = document.getElementById('player-list');
      const t = translations[gameState.language];
      
      while (gameState.players.length < gameState.playerCount) {
        gameState.players.push(`${t.player} ${gameState.players.length + 1}`);
      }
      while (gameState.players.length > gameState.playerCount) {
        gameState.players.pop();
      }

      list.innerHTML = gameState.players.map((name, i) => `
        <div class="player-item">
          <div class="player-number">${i + 1}</div>
          <input type="text" class="player-input" value="${name}" 
                 onchange="updatePlayerName(${i}, this.value)"
                 placeholder="${t.player} ${i + 1}">
        </div>
      `).join('');
    }

    function updatePlayerName(index, name) {
      gameState.players[index] = name || `${translations[gameState.language].player} ${index + 1}`;
    }

    // Game Logic
    function showCustomWordModal() {
      document.getElementById('custom-word-modal').classList.add('active');
    }

    function closeModal(modalId) {
      document.getElementById(modalId).classList.remove('active');
    }

    function startGame() {
      closeModal('custom-word-modal');
      
      const customWord = document.getElementById('custom-round-word').value.trim();
      
      if (customWord) {
        gameState.currentWord = {
          word: customWord,
          hint: translations[gameState.language].hint
        };
      } else {
        const allWords = [...wordDatabase, ...gameState.customWords];
        
        // Get available words (not used yet)
        const availableWords = allWords.filter((word, index) => {
          const wordId = `${word.en}_${word.ku}`;
          return !gameState.usedWordIds.includes(wordId);
        });
        
        // If all words have been used, reset the used words list
        if (availableWords.length === 0) {
          gameState.usedWordIds = [];
          const randomWord = allWords[Math.floor(Math.random() * allWords.length)];
          const wordId = `${randomWord.en}_${randomWord.ku}`;
          gameState.usedWordIds.push(wordId);
          
          gameState.currentWord = {
            word: gameState.language === 'en' ? randomWord.en : randomWord.ku,
            hint: gameState.language === 'en' ? randomWord.hint.en : randomWord.hint.ku
          };
        } else {
          // Select a random word from available words
          const randomWord = availableWords[Math.floor(Math.random() * availableWords.length)];
          const wordId = `${randomWord.en}_${randomWord.ku}`;
          gameState.usedWordIds.push(wordId);
          
          gameState.currentWord = {
            word: gameState.language === 'en' ? randomWord.en : randomWord.ku,
            hint: gameState.language === 'en' ? randomWord.hint.en : randomWord.hint.ku
          };
        }
      }

      // Select imposters
      gameState.imposters = [];
      const indices = [...Array(gameState.playerCount).keys()];
      for (let i = 0; i < gameState.imposterCount; i++) {
        const randIndex = Math.floor(Math.random() * indices.length);
        gameState.imposters.push(indices.splice(randIndex, 1)[0]);
      }

      // Do not reset scores here; only initialize scores for new players
      gameState.players.forEach(player => {
        if (!(player in gameState.scores)) {
          gameState.scores[player] = 0;
        }
      });

      gameState.currentPlayerIndex = 0;
      document.getElementById('custom-round-word').value = '';
      
      showCurrentPlayer();
      showScreen('gameplay-screen');
    }

    function showCurrentPlayer() {
      const t = translations[gameState.language];
      const playerName = gameState.players[gameState.currentPlayerIndex];
      
      document.getElementById('current-player-name').textContent = playerName;
      document.getElementById('role-card').classList.remove('flipped');
      document.getElementById('pass-phone-btn').style.display = 'none';
    }

    function flipCard() {
      const card = document.getElementById('role-card');
      if (card.classList.contains('flipped')) return;
      
      card.classList.add('flipped');
      
      const t = translations[gameState.language];
      const isImposter = gameState.imposters.includes(gameState.currentPlayerIndex);
      const back = document.getElementById('role-card-back');
      
      back.className = 'role-card-back ' + (isImposter ? 'imposter' : 'civilian');
      document.getElementById('role-icon').textContent = isImposter ? 'üïµÔ∏è' : 'üòá';
      document.getElementById('role-title').textContent = isImposter ? t.imposter : t.civilian;
      
      if (isImposter) {
        document.getElementById('role-word').textContent = t.noWord;
        document.getElementById('role-hint').textContent = `${t.hint}: ${gameState.currentWord.hint}`;
      } else {
        document.getElementById('role-word').textContent = `${t.yourWord} ${gameState.currentWord.word}`;
        document.getElementById('role-hint').textContent = `${t.hint}: ${gameState.currentWord.hint}`;
      }
      
      setTimeout(() => {
        document.getElementById('pass-phone-btn').style.display = 'flex';
      }, 1000);
    }

    function nextPlayer() {
      gameState.currentPlayerIndex++;
      
      if (gameState.currentPlayerIndex >= gameState.playerCount) {
        buildCardPicker();
        showScreen('discussion-screen');
        document.getElementById('card-picker-result').style.display = 'none';
        document.getElementById('start-picker-btn').style.display = 'flex';
        document.getElementById('end-discussion-btn').style.display = 'none';
      } else {
        showCurrentPlayer();
      }
    }

    // Card Picker
    let isPicking = false;
    
    function buildCardPicker() {
      const grid = document.getElementById('card-picker-grid');
      const playerCount = gameState.players.length;
      
      grid.innerHTML = '';
      
      gameState.players.forEach((player, index) => {
        const card = document.createElement('div');
        card.className = 'player-card';
        card.textContent = player;
        card.dataset.playerIndex = index;
        grid.appendChild(card);
      });
    }
    
    function startCardPicker() {
      if (isPicking) return;
      isPicking = true;
      
      const cards = document.querySelectorAll('.player-card');
      const selectedIndex = Math.floor(Math.random() * gameState.playerCount);
      
      // Hide start button
      document.getElementById('start-picker-btn').style.display = 'none';
      
      // Start flashing animation with random delays
      cards.forEach((card, index) => {
        const randomDelay = Math.random() * 500; // Random delay up to 500ms
        setTimeout(() => {
          card.classList.add('flashing');
        }, randomDelay);
      });
      
      // Stop after 3 seconds and select winner
      setTimeout(() => {
        // Remove flashing from all cards
        cards.forEach(card => card.classList.remove('flashing'));
        
        const selectedCard = cards[selectedIndex];
        
        // Add selected class which will animate to center with flip
        selectedCard.classList.add('selected');
        
        // Show result after animation completes
        setTimeout(() => {
          const t = translations[gameState.language];
          document.getElementById('card-picker-result').style.display = 'block';
          document.getElementById('card-picker-result-name').textContent = gameState.players[selectedIndex];
          document.getElementById('end-discussion-btn').style.display = 'flex';
          
          isPicking = false;
        }, 800); // Wait for flip animation
        
      }, 3000);
    }

    // Scoring
    function showScoringScreen() {
      const list = document.getElementById('score-list');
      list.innerHTML = gameState.players.map(player => `
        <div class="score-item">
          <span class="score-player">${player}</span>
          <div class="score-controls">
            <button class="score-btn score-btn-minus" onclick="adjustScore('${player}', -1)">‚àí</button>
            <span class="score-value" id="score-${player.replace(/\s/g, '-')}">${gameState.scores[player]}</span>
            <button class="score-btn score-btn-plus" onclick="adjustScore('${player}', 1)">+</button>
          </div>
        </div>
      `).join('');
    }

    function adjustScore(player, delta) {
      gameState.scores[player] = (gameState.scores[player] || 0) + delta;
      const el = document.getElementById(`score-${player.replace(/\s/g, '-')}`);
      if (el) el.textContent = gameState.scores[player];
    }

    function saveScores() {
      // Update scores only once per round
      gameState.players.forEach(player => {
        const displayedScore = parseInt(document.getElementById(`score-${player.replace(/\s/g, '-')}`).textContent, 10);
        const previousScore = gameState.scores[player] || 0;
        const currentRoundScore = displayedScore - previousScore; // Calculate only the current round's score
        gameState.scores[player] += currentRoundScore; // Add the current round's score
      });

      showToast(gameState.language === 'ku' ? 'ÿÆÿß⁄µ€ï⁄©ÿßŸÜ Ÿæÿßÿ¥€ï⁄©€ïŸàÿ™ ⁄©ÿ±ÿßŸÜ!' : 'Scores saved!');
      showCustomWordModal();
    }

    function endGame() {
      // Find all winners (players with max score)
      let maxScore = -Infinity;
      let winners = [];

      Object.entries(gameState.scores).forEach(([player, score]) => {
        if (score > maxScore) {
          maxScore = score;
          winners = [player];
        } else if (score === maxScore) {
          winners.push(player);
        }
      });

      // Show winner splash
      showWinnerSplash(winners);

      // Save to history
      const gameRecord = {
        date: new Date().toISOString(),
        players: [...gameState.players],
        scores: { ...gameState.scores }, // Use accumulated scores
        imposters: gameState.imposters.map(i => gameState.players[i])
      };

      gameState.gameHistory.unshift(gameRecord);
      if (gameState.gameHistory.length > 50) gameState.gameHistory.pop();

      saveSettings();
      updateHistoryList();
    }
    
    function showWinnerSplash(winners) {
      const t = translations[gameState.language];
      
      // Display winner(s) - handle both single and multiple winners
      if (winners.length === 1) {
        document.getElementById('winner-title-text').textContent = t.winner;
        document.getElementById('winner-name').textContent = winners[0];
      } else {
        document.getElementById('winner-title-text').textContent = t.winners || (gameState.language === 'ku' ? 'ÿ®ÿ±ÿßŸà€ï⁄©ÿßŸÜ!' : 'Winners!');
        document.getElementById('winner-name').textContent = winners.join(gameState.language === 'ku' ? ' Ÿà ' : ' & ');
      }
      
      // Build scores list
      const sortedScores = Object.entries(gameState.scores)
        .sort((a, b) => b[1] - a[1]);
      
      const scoresHtml = sortedScores.map(([player, score]) => `
        <div class="winner-score-item">
          <span>${player}</span>
          <span style="font-weight: 700; color: var(--warning);">${score}</span>
        </div>
      `).join('');
      
      document.getElementById('winner-scores-content').innerHTML = scoresHtml;
      document.getElementById('winner-splash').classList.add('show');
      
      // Create confetti
      createConfetti();
    }
    
    function closeWinnerSplash() {
      document.getElementById('winner-splash').classList.remove('show');
      document.querySelectorAll('.confetti').forEach(c => c.remove());
      showScreen('menu-screen');
    }
    
    function createConfetti() {
      const colors = ['#6c5ce7', '#00cec9', '#fd79a8', '#fdcb6e', '#e17055', '#74b9ff'];
      
      for (let i = 0; i < 50; i++) {
        const confetti = document.createElement('div');
        confetti.className = 'confetti';
        confetti.style.left = Math.random() * 100 + 'vw';
        confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
        confetti.style.animationDelay = Math.random() * 3 + 's';
        confetti.style.animationDuration = (Math.random() * 2 + 3) + 's';
        document.body.appendChild(confetti);
        
        setTimeout(() => confetti.remove(), 6000);
      }
    }

    // Settings
    function setLanguage(lang) {
      gameState.language = lang;
      document.body.dir = lang === 'ku' ? 'rtl' : 'ltr';
      document.documentElement.lang = lang;
      
      document.getElementById('lang-en').classList.toggle('active', lang === 'en');
      document.getElementById('lang-ku').classList.toggle('active', lang === 'ku');
      
      // Update ticker label
      document.getElementById('ticker-label').textContent = translations[lang].tickerInfo;
      
      // Update all translatable elements
      document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.dataset.i18n;
        if (translations[lang][key]) {
          el.textContent = translations[lang][key];
        }
      });
      
      updatePlayerList();
      saveSettings();
    }

    function setTheme(theme) {
      gameState.theme = theme;
      document.body.className = '';
      
      document.querySelectorAll('.theme-btn').forEach(btn => btn.classList.remove('active'));
      document.querySelector(`.theme-${theme}`).classList.add('active');
      
      // Remove existing theme decorations
      document.querySelectorAll('.snowflake, .ramadan-lantern, .ramadan-star, .ramadan-moon').forEach(s => s.remove());
      
      // Initialize music for theme
      musicStarted = false;
      initMusic();
      if (!gameState.muted && backgroundMusic) {
        backgroundMusic.play().catch(err => {
          console.error('Music playback failed:', err);
        });
        musicStarted = true;
      }
      
      if (theme === 'light') {
        document.body.classList.add('theme-light-mode');
      } else if (theme === 'modern') {
        document.body.classList.add('theme-modern-mode');
      } else if (theme === 'snow') {
        document.body.classList.add('theme-snow-mode');
        createSnowflakes();
      } else if (theme === 'ramadan') {
        document.body.classList.add('theme-ramadan-mode');
        createRamadanDecorations();
      } else if (theme === 'dark') {
        document.body.classList.add('theme-dark-mode');
      }
      
      saveSettings();
    }

    function createSnowflakes() {
      const snowflakes = ['‚ùÑ', '‚ùÖ', '‚ùÜ', '.', '‚úº'];
      
      for (let i = 0; i < 30; i++) {
        const snowflake = document.createElement('div');
        snowflake.className = 'snowflake';
        snowflake.textContent = snowflakes[Math.floor(Math.random() * snowflakes.length)];
        snowflake.style.left = Math.random() * 100 + 'vw';
        snowflake.style.animationDuration = (Math.random() * 3 + 5) + 's';
        snowflake.style.animationDelay = Math.random() * 5 + 's';
        snowflake.style.fontSize = (Math.random() * 1 + 0.8) + 'rem';
        document.body.appendChild(snowflake);
      }
    }
    
    function createRamadanDecorations() {
      // Create moon
      const moon = document.createElement('div');
      moon.className = 'ramadan-moon';
      moon.innerHTML = '&#127769;';
      document.body.appendChild(moon);
      
      // Create lanterns
      const lanternPositions = [
        { top: '100px', left: '30px' },
        { top: '150px', right: '30px' },
        { top: '200px', left: '60px' },
        { top: '180px', right: '80px' },
        { top: '120px', left: '50%' }
      ];
      
      lanternPositions.forEach((pos, i) => {
        const lantern = document.createElement('div');
        lantern.className = 'ramadan-lantern';
        lantern.textContent = 'üèÆ';
        Object.assign(lantern.style, pos);
        lantern.style.animationDelay = (i * 0.5) + 's';
        document.body.appendChild(lantern);
      });
      
      // Create stars with ‚≠êÔ∏è
      for (let i = 0; i < 20; i++) {
        const star = document.createElement('div');
        star.className = 'ramadan-star';
        star.textContent = '‚≠êÔ∏è';
        star.style.top = Math.random() * 40 + 10 + '%';
        star.style.left = Math.random() * 100 + '%';
        star.style.animationDelay = Math.random() * 4 + 's';
        document.body.appendChild(star);
      }
    }

    // Background Music
    let backgroundMusic = null;
    let musicStarted = false;
    
    function initMusic() {
      // Stop current music if playing
      if (backgroundMusic) {
        backgroundMusic.pause();
        backgroundMusic = null;
      }
      
      // Only create music for ramadan and snow themes
      if (gameState.theme === 'ramadan') {
        backgroundMusic = new Audio('ramadan.mp3');
        backgroundMusic.loop = true;
        backgroundMusic.volume = 0.3;
      } else if (gameState.theme === 'snow') {
        backgroundMusic = new Audio('snow.mp3');
        backgroundMusic.loop = true;
        backgroundMusic.volume = 0.3;
      }
      
      // Try to play music if not muted
      if (backgroundMusic && !gameState.muted) {
        backgroundMusic.play().catch(err => {
          console.log('Music autoplay blocked, waiting for user interaction');
          musicStarted = false;
        }).then(() => {
          if (backgroundMusic && !backgroundMusic.paused) {
            musicStarted = true;
          }
        });
      }
    }
    
    function startMusicOnFirstTouch() {
      if (!musicStarted && !gameState.muted && backgroundMusic) {
        backgroundMusic.play().catch(err => {
          console.error('Music playback failed:', err);
        });
        musicStarted = true;
      }
    }
    
    // Add touch listener for first interaction
    document.addEventListener('touchstart', startMusicOnFirstTouch, { once: true });
    document.addEventListener('click', startMusicOnFirstTouch, { once: true });
    
    function toggleMute() {
      gameState.muted = !gameState.muted;
      const btn = document.getElementById('mute-btn');
      const icon = document.getElementById('mute-icon');
      const t = translations[gameState.language];
      
      btn.classList.toggle('muted', gameState.muted);
      icon.textContent = gameState.muted ? 'üîá' : 'üîä';
      btn.querySelector('[data-i18n]').textContent = gameState.muted ? t.soundOff : t.soundOn;
      
      // Control music playback
      initMusic();
      if (gameState.muted) {
        backgroundMusic.pause();
      } else if (musicStarted) {
        backgroundMusic.play().catch(err => console.error('Music play failed:', err));
      }
      
      saveSettings();
    }

    function toggleWordEditor() {
      const editor = document.getElementById('word-editor');
      editor.style.display = editor.style.display === 'none' ? 'block' : 'none';
      updateCustomWordList();
    }

    function addCustomWord() {
      const en = document.getElementById('new-word-en').value.trim();
      const ku = document.getElementById('new-word-ku').value.trim();
      const hint = document.getElementById('new-word-hint').value.trim();
      
      if (en || ku) {
        gameState.customWords.push({
          en: en || ku,
          ku: ku || en,
          hint: { en: hint || 'Custom', ku: hint || 'ÿ™ÿß€åÿ®€ïÿ™' }
        });
        
        document.getElementById('new-word-en').value = '';
        document.getElementById('new-word-ku').value = '';
        document.getElementById('new-word-hint').value = '';
        
        updateCustomWordList();
        saveSettings();
        showToast(gameState.language === 'ku' ? 'ÿÆÿß⁄µ€ï⁄©ÿßŸÜ Ÿæÿßÿ¥€ï⁄©€ïŸàÿ™ ⁄©ÿ±ÿßŸÜ!' : 'Scores saved!');
        showCustomWordModal();
      }
    }

    function updateCustomWordList() {
      const list = document.getElementById('custom-word-list');
      list.innerHTML = gameState.customWords.map((w, i) => `
        <div class="word-item">
          <span>${w.en} / ${w.ku}</span>
          <button class="player-remove" onclick="removeCustomWord(${i})">√ó</button>
        </div>
      `).join('');
    }

    function removeCustomWord(index) {
      gameState.customWords.splice(index, 1);
      updateCustomWordList();
      saveSettings();
    }

    function showClearDataModal() {
      document.getElementById('clear-data-modal').classList.add('active');
    }

    function clearAllData() {
      gameState.customWords = [];
      gameState.gameHistory = [];
      gameState.usedWordIds = [];
      localStorage.removeItem('kurdishImposterSettings');
      closeModal('clear-data-modal');
      showToast(gameState.language === 'ku' ? 'Ÿá€ïŸÖŸàÔøΩÔøΩ ÿØÿßÿ™ÿß ÿ≥⁄ïÿß€å€ïŸà€ï!' : 'All data cleared!');
      updateHistoryList();
      updateCustomWordList();
    }

    function showAboutModal() {
      document.getElementById('about-modal').classList.add('active');
    }
    
    function toggleNewsTicker() {
      gameState.newsTickerHidden = !gameState.newsTickerHidden;
      const ticker = document.querySelector('.news-ticker');
      const btn = document.getElementById('ticker-toggle-btn');
      const t = translations[gameState.language];
      
      if (gameState.newsTickerHidden) {
        ticker.classList.add('hidden');
        btn.querySelector('[data-i18n]').textContent = t.showNews;
      } else {
        ticker.classList.remove('hidden');
        btn.querySelector('[data-i18n]').textContent = t.hideNews;
      }
      
      saveSettings();
    }

    // History
    function updateHistoryList() {
      const list = document.getElementById('history-list');
      const t = translations[gameState.language];
      
      if (gameState.gameHistory.length === 0) {
        list.innerHTML = `
          <div class="empty-state">
            <div class="empty-icon">üìä</div>
            <p data-i18n="noHistory">${t.noHistory}</p>
          </div>
        `;
        return;
      }
      
      list.innerHTML = gameState.gameHistory.map(game => {
        const date = new Date(game.date);
        const dateStr = date.toLocaleDateString(gameState.language === 'ku' ? 'ckb' : 'en');
        
        const maxScore = Math.max(...Object.values(game.scores));
        
        return `
          <div class="history-item">
            <div class="history-date">${dateStr}</div>
            <div class="history-players">
              ${game.players.map(p => `
                <span class="history-player ${game.scores[p] === maxScore ? 'winner' : ''}">
                  ${p}: ${game.scores[p]} ${game.imposters.includes(p) ? 'üïµÔ∏è' : ''}
                </span>
              `).join('')}
            </div>
          </div>
        `;
      }).join('');
    }

    // Storage
    function saveSettings() {
      const settings = {
        language: gameState.language,
        theme: gameState.theme,
        muted: gameState.muted,
        customWords: gameState.customWords,
        gameHistory: gameState.gameHistory,
        usedWordIds: gameState.usedWordIds,
        newsTickerHidden: gameState.newsTickerHidden
      };
      localStorage.setItem('kurdishImposterSettings', JSON.stringify(settings));
    }

    function loadSettings() {
      try {
        const saved = localStorage.getItem('kurdishImposterSettings');
        if (saved) {
          const settings = JSON.parse(saved);
          gameState.language = settings.language || 'en';
          gameState.theme = settings.theme || 'ramadan';
          gameState.muted = settings.muted || false; // Load muted state
          gameState.customWords = settings.customWords || [];
          gameState.gameHistory = settings.gameHistory || [];
          gameState.usedWordIds = settings.usedWordIds || [];
          gameState.newsTickerHidden = settings.newsTickerHidden || false;

          setLanguage(gameState.language);
          setTheme(gameState.theme);

          // Apply muted state
          const btn = document.getElementById('mute-btn');
          const icon = document.getElementById('mute-icon');
          const t = translations[gameState.language];
          btn.classList.toggle('muted', gameState.muted);
          icon.textContent = gameState.muted ? 'üîá' : 'üîä';
          btn.querySelector('[data-i18n]').textContent = gameState.muted ? t.soundOff : t.soundOn;

          if (gameState.muted) {
            if (backgroundMusic) backgroundMusic.pause();
          } else {
            initMusic();
          }

          updateHistoryList();

          // Apply ticker state
          if (gameState.newsTickerHidden) {
            document.querySelector('.news-ticker').classList.add('hidden');
            const btn = document.getElementById('ticker-toggle-btn');
            if (btn) {
              btn.querySelector('[data-i18n]').textContent = translations[gameState.language].showNews;
            }
          }
        } else {
          // First time loading - set Ramadan theme as default
          setTheme('ramadan');
        }
      } catch (e) {
        console.error('Failed to load settings:', e);
      }
    }

    // Toast
    function showToast(message) {
      const toast = document.getElementById('toast');
      toast.textContent = message;
      toast.classList.add('show');
      setTimeout(() => toast.classList.remove('show'), 3000);
    }

    // Screen transition handler for scoring
    const observer = new MutationObserver((mutations) => {
      mutations.forEach(mutation => {
        if (mutation.target.id === 'scoring-screen' && mutation.target.classList.contains('active')) {
          showScoringScreen();
        }
      });
    });

    document.querySelectorAll('.screen').forEach(screen => {
      observer.observe(screen, { attributes: true, attributeFilter: ['class'] });
    });
  </script>
  <!-- Service Worker Registration -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js')
          .then(registration => {
            console.log('Service Worker registered:', registration);
          })
          .catch(error => {
            console.log('Service Worker registration failed:', error);
          });
      });
    }
  </script>
  <script>
    (function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9c5065283031f76e',t:'MTc2OTYwMjMxNS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();
  </script>
 </body>
</html>